import{K as N,r as h,m as w,j as e,L as y,S}from"./app-Ce-QGPGl.js";import{S as b,H as F}from"./layout-c1GiK0py.js";import{I as l}from"./input-error-LhqeKMYN.js";import{B as C}from"./button-CnpRZm0V.js";import{I as c}from"./input-CNkg4OnG.js";import{L as m}from"./label-BPyimSqx.js";import{A as M}from"./app-layout-C5x1NiS2.js";import{S as I,a as L,b as z,c as E,f as n}from"./select-2VTk7Rrp.js";import{z as A}from"./transition-CFOlYM9X.js";import"./index-B_yfZku5.js";import"./utils-jAU0Cazi.js";import"./index-CsqGJx49.js";import"./app-logo-icon-CQwmATZS.js";import"./index-Cq7HHnwq.js";const T=[{title:"Tv Settings",href:"/settings/tv-settings"}];function J({tv_settings:k}){const{auth:o}=N().props,[g,x]=h.useState(void 0),{data:a,setData:i,errors:d,processing:j,recentlySuccessful:v}=w({ip:o.user.ip,port:o.user.port,media_type:o.user.media_type||"image",media_url:[],media_height:o.user.media_height,media_width:o.user.media_width}),f=t=>{if(t.preventDefault(),g)return;const s=new FormData;s.append("ip",a.ip),s.append("port",a.port),s.append("media_type",a.media_type),s.append("media_height",a.media_height),s.append("media_width",a.media_width),a.media_url.forEach((r,p)=>{s.append(`media_url[${p}]`,r)}),S.post(route("tv_settings.update"),s,{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{}})};return h.useRef(null),h.useEffect(()=>()=>{},[]),e.jsxs(M,{breadcrumbs:T,children:[e.jsx(y,{title:"TV settings"}),e.jsx(b,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(F,{title:"Update your tv settings",description:"update ip and port to connect to tv"}),e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"ip",children:"Ip Address"}),e.jsx(c,{id:"ip",className:"mt-1 block w-full",value:a.ip,onChange:t=>i("ip",t.target.value),required:!0,autoComplete:"ip",placeholder:"Ip Address"}),e.jsx(l,{className:"mt-2",message:d.ip})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"port",children:"Port"}),e.jsx(c,{id:"port",className:"mt-1 block w-full",value:a.port,onChange:t=>i("port",t.target.value),required:!0,autoComplete:"port",placeholder:"Port"}),e.jsx(l,{className:"mt-2",message:d.port})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"media_type",children:"Media Type"}),e.jsxs(I,{value:a.media_type,onValueChange:t=>i("media_type",t),children:[e.jsx(L,{className:"w-full",children:e.jsx(z,{placeholder:"Select media type"})}),e.jsxs(E,{children:[e.jsx(n,{value:"youtube",children:"YouTube"}),e.jsx(n,{value:"video",children:"Video"}),e.jsx(n,{value:"gif",children:"GIF"}),e.jsx(n,{value:"image",children:"Image (Multiple URLs)"})]})]}),e.jsx(l,{className:"mt-2",message:d.media_type})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"media_url",children:"Upload Media"}),e.jsx(c,{id:"media_url",type:"file",multiple:!0,className:"mt-1 block w-full",accept:"image/gif,image/jpeg,image/png,video/mp4",onChange:t=>{const s=Array.from(t.target.files??[]),r=2,p=r*1024*1024;if(s.filter(u=>u.size>p).length>0){x(`Some files exceed ${r}MB and were not selected.`);const u=s.filter(_=>_.size<=p);i("media_url",u)}else x(void 0),i("media_url",s)}}),e.jsx(l,{className:"mt-2",message:d.media_url}),e.jsx(l,{className:"mt-2",message:g??void 0})]}),a.media_url.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:a.media_url.map((t,s)=>{const r=URL.createObjectURL(t);return a.media_type==="image"||a.media_type==="gif"?e.jsx("img",{src:r,alt:`preview-${s}`,className:"h-24 w-24 rounded object-cover shadow"},s):a.media_type==="video"?e.jsx("video",{src:r,controls:!0,className:"h-24 w-32 rounded shadow"},s):null})}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"port",children:"Media Height"}),e.jsx(c,{id:"media_height",className:"mt-1 block w-full",value:a.media_height,onChange:t=>i("media_height",t.target.value),autoComplete:"media_height",placeholder:"Media Height"}),e.jsx(l,{className:"mt-2",message:d.media_height})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"port",children:"Media Width"}),e.jsx(c,{id:"media_width",className:"mt-1 block w-full",value:a.media_width,onChange:t=>i("media_width",t.target.value),autoComplete:"media_width",placeholder:"Media Width"}),e.jsx(l,{className:"mt-2",message:d.media_width})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(C,{disabled:j,children:"Save & Connect"}),e.jsx(A,{show:v,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-neutral-600",children:"Saved"})})]})]})]})})]})}export{J as default};
