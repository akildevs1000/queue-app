import{K as f,m as _,r as u,j as e,L as N}from"./app-DBlpo02P.js";import{S,H as w}from"./layout-DVZtsaBK.js";import{I as l}from"./input-error-frA3n_M5.js";import{B as b}from"./button-C_M3280V.js";import{I as n}from"./input-QPJ2YgS_.js";import{L as d}from"./label-Dw8dk0yT.js";import{A as C}from"./app-layout-DKVyBwgo.js";import{z as k}from"./transition-B7JzQQGG.js";import"./index-DzXPsnIG.js";import"./utils-jAU0Cazi.js";import"./index-BqpGK12V.js";import"./app-logo-icon-CM5zUgEF.js";const y=[{title:"Tv Settings",href:"/settings/tv-settings"}];function T(){const{auth:r}=f().props,{data:t,setData:a,put:h,errors:i,processing:g,recentlySuccessful:x}=_({ip:r.user.ip,port:r.user.port,media_url:r.user.media_url,media_height:r.user.media_height,media_width:r.user.media_width}),v=s=>{s.preventDefault(),h(route("tv_settings.update"),{preserveScroll:!0,onSuccess:()=>{p()}})},c=u.useRef(null),p=()=>{if(!(t!=null&&t.ip)||!(t!=null&&t.port)){console.warn("Missing IP or port");return}const s=`ws://${t.ip}:${t.port}`,o=new WebSocket(s);c.current=o,o.addEventListener("open",()=>{console.log("Connected to WS server");const m={event:"trigger-settings",data:t};o.send(JSON.stringify(m))}),o.addEventListener("error",m=>{console.error("WebSocket error:",m)}),o.addEventListener("close",()=>{console.log("WebSocket connection closed")})},j=()=>{c.current&&(c.current.close(),c.current=null)};return u.useEffect(()=>(p(),()=>{j()}),[]),e.jsxs(C,{breadcrumbs:y,children:[e.jsx(N,{title:"TV settings"}),e.jsx(S,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(w,{title:"Update your tv settings",description:"update ip and port to connect to tv"}),e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"ip",children:"Ip Address"}),e.jsx(n,{id:"ip",className:"mt-1 block w-full",value:t.ip,onChange:s=>a("ip",s.target.value),required:!0,autoComplete:"ip",placeholder:"Ip Address"}),e.jsx(l,{className:"mt-2",message:i.ip})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"port",children:"Port"}),e.jsx(n,{id:"port",className:"mt-1 block w-full",value:t.port,onChange:s=>a("port",s.target.value),required:!0,autoComplete:"port",placeholder:"Port"}),e.jsx(l,{className:"mt-2",message:i.port})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"port",children:"Media Url"}),e.jsx(n,{id:"media_url",className:"mt-1 block w-full",value:t.media_url,onChange:s=>a("media_url",s.target.value),required:!0,autoComplete:"media_url",placeholder:"media_url"}),e.jsx(l,{className:"mt-2",message:i.media_url})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"port",children:"Media Height"}),e.jsx(n,{id:"media_height",className:"mt-1 block w-full",value:t.media_height,onChange:s=>a("media_height",s.target.value),required:!0,autoComplete:"media_height",placeholder:"Media Height"}),e.jsx(l,{className:"mt-2",message:i.media_height})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"port",children:"Media Width"}),e.jsx(n,{id:"media_width",className:"mt-1 block w-full",value:t.media_width,onChange:s=>a("media_width",s.target.value),required:!0,autoComplete:"media_width",placeholder:"Media Width"}),e.jsx(l,{className:"mt-2",message:i.media_width})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(b,{disabled:g,children:"Save & Connect"}),e.jsx(k,{show:x,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-neutral-600",children:"Saved"})})]})]})]})})]})}export{T as default};
