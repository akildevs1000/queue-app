import{j as e,K as v,r as l,m as p,L as b}from"./app-Bt5uBVhc.js";import{C as N,a as x}from"./card-CDrx5nYV.js";import{c as y}from"./utils-jAU0Cazi.js";const k=({name:i="ABC Hospital",token_number_display:t,service:a,already_waiting_count:d,estimated_wait_time:c,date:r,time:n,code:m})=>e.jsxs("div",{className:"mx-auto w-[260px] border border-dashed border-gray-300 bg-white p-2 font-mono text-sm text-black shadow-md",children:[e.jsx("div",{className:"text-sm font-semibold",children:i}),e.jsx("div",{className:"text-md mt-2",children:"Ticket"}),e.jsxs("div",{className:"my-1 text-3xl font-bold",children:[" ",t]}),e.jsxs("div",{className:"mb-2 text-sm",children:[n," ",r]}),e.jsx("div",{className:"text-sm",children:"You will be Served"}),e.jsxs("div",{className:"text-sm font-semibold",children:[a," ","SEC"," ",m]}),e.jsxs("div",{className:"mt-4 text-xs",children:["Total: ",d," token waiting for service",e.jsx("br",{}),"Average waiting time ",c]})]});function g({children:i,className:t,...a}){return e.jsx(N,{className:y("bg-gradient-to-r from-blue-500 to-purple-600 text-white cursor-pointer hover:scale-105 transition-transform border-none",t),...a,children:i})}function E(){const{ticketInfo:i}=v().props,[t,a]=l.useState("language"),[d,c]=l.useState([]),{data:r,setData:n,post:m}=p({language:"",service_id:0,service_name:"",code:""}),u=async s=>{try{const j=await(await fetch(`/service-list?language=${s}`)).json();c(j)}catch(o){console.error("Failed to fetch services",o)}},h=s=>{n("language",s),a("service"),u(s)},f=s=>{const o={language:r.language,service_id:s.id,code:s.code,service_name:s.name};n(o)};return l.useEffect(()=>{r.service_id&&m("/tokens",{onSuccess:()=>{a("thankyou")},onFinish:()=>{},onError:s=>{console.error("Form submission failed",s)}})},[r]),l.useEffect(()=>{let s;return t==="thankyou"&&(s=setTimeout(()=>{a("language"),n({language:"",service_id:0,service_name:"",code:""}),c([])},5e3)),()=>clearTimeout(s)},[t,n]),e.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center bg-[#f5f5f5] px-4 text-center",children:[e.jsx(b,{title:"Guest"}),e.jsxs("div",{children:[t==="language"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"Please choose your language"}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsx(g,{onClick:()=>h("en"),children:e.jsx(x,{className:"py-10 text-xl font-semibold",children:"English"})}),e.jsx(g,{onClick:()=>h("ar"),children:e.jsx(x,{className:"py-10 text-xl font-semibold",children:"العربية"})})]})]}),t==="service"&&r.language&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:r.language==="en"?"Please select a service":"الرجاء اختيار الخدمة"}),e.jsx("div",{className:"mx-auto grid max-w-md grid-cols-1 gap-6 md:grid-cols-2",children:d.map(s=>e.jsx(g,{onClick:()=>f(s),className:"cursor-pointer transition-transform hover:scale-105",children:e.jsx(x,{className:"py-10 text-xl font-semibold",children:s.name})},s.id))})]})]}),e.jsx("div",{children:t==="thankyou"&&i&&e.jsx(k,{...i})})]})}export{E as default};
