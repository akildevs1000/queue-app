import{K as j,m as v,r as p,j as e,L as f}from"./app-B8FREZE8.js";import{S as _,H as N}from"./layout-WUbjuc2x.js";import{I as l}from"./input-error-CDE2eyi_.js";import{B as S}from"./button-Bj0Y08Hm.js";import{I as d}from"./input-CUbEmisE.js";import{L as m}from"./label-Btggm2Of.js";import{A as w}from"./app-layout-AENhnwhx.js";import{z as b}from"./transition-Vwg0g9Pe.js";import"./index-CJvlZnpe.js";import"./utils-jAU0Cazi.js";import"./index-ZvxEBGot.js";import"./app-logo-icon-0AqQZbKo.js";const k=[{title:"Tv Settings",href:"/settings/tv-settings"}];function R(){const{auth:a}=j().props,{data:s,setData:i,put:u,errors:o,processing:h,recentlySuccessful:g}=v({ip:a.user.ip,port:a.user.port,media_url:a.user.media_url,media_height:a.user.media_height,media_width:a.user.media_width}),x=t=>{t.preventDefault(),u(route("tv_settings.update"),{preserveScroll:!0,onSuccess:()=>{const r=c.current;if(r&&r.readyState===WebSocket.OPEN){let n={event:"trigger-settings",data:s};r.send(JSON.stringify(n))}else console.warn("WebSocket is not open.")}})},c=p.useRef(null);return p.useEffect(()=>{let t=`ws://${s.ip}:${s.port}`;const r=new WebSocket(t);return c.current=r,r.addEventListener("open",()=>{console.log("Connected to WS server")}),r.addEventListener("error",n=>{console.error("WebSocket error:",n)}),()=>{r.close()}},[]),e.jsxs(w,{breadcrumbs:k,children:[e.jsx(f,{title:"TV settings"}),e.jsx(_,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(N,{title:"Update your tv settings",description:"update ip and port to connect to tv"}),e.jsxs("form",{onSubmit:x,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"ip",children:"Ip Address"}),e.jsx(d,{id:"ip",className:"mt-1 block w-full",value:s.ip,onChange:t=>i("ip",t.target.value),required:!0,autoComplete:"ip",placeholder:"Ip Address"}),e.jsx(l,{className:"mt-2",message:o.ip})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"port",children:"Port"}),e.jsx(d,{id:"port",className:"mt-1 block w-full",value:s.port,onChange:t=>i("port",t.target.value),required:!0,autoComplete:"port",placeholder:"Port"}),e.jsx(l,{className:"mt-2",message:o.port})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"port",children:"Media Url"}),e.jsx(d,{id:"media_url",className:"mt-1 block w-full",value:s.media_url,onChange:t=>i("media_url",t.target.value),required:!0,autoComplete:"media_url",placeholder:"media_url"}),e.jsx(l,{className:"mt-2",message:o.media_url})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"port",children:"Media Height"}),e.jsx(d,{id:"media_height",className:"mt-1 block w-full",value:s.media_height,onChange:t=>i("media_height",t.target.value),required:!0,autoComplete:"media_height",placeholder:"Media Height"}),e.jsx(l,{className:"mt-2",message:o.media_height})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"port",children:"Media Width"}),e.jsx(d,{id:"media_width",className:"mt-1 block w-full",value:s.media_width,onChange:t=>i("media_width",t.target.value),required:!0,autoComplete:"media_width",placeholder:"Media Width"}),e.jsx(l,{className:"mt-2",message:o.media_width})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(S,{disabled:h,children:"Save & Connect"}),e.jsx(b,{show:g,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-neutral-600",children:"Saved"})})]})]})]})})]})}export{R as default};
