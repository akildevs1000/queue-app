import{K as j,m as v,r as c,j as e,L as f}from"./app-Dh0n7yI5.js";import{S as _,H as N}from"./layout-LxRy_jhj.js";import{I as l}from"./input-error-B-T7dflM.js";import{B as S}from"./button-DikTIQ0o.js";import{I as d}from"./input-DKJHshJs.js";import{L as m}from"./label-DTO3V6Jw.js";import{A as w}from"./app-layout-CwRq6lHc.js";import{z as b}from"./transition-Bw6Hqfll.js";import"./index-DMd28MNy.js";import"./utils-jAU0Cazi.js";import"./index-B8dvXOFB.js";import"./app-logo-icon-D-G21ChB.js";const k=[{title:"Tv Settings",href:"/settings/tv-settings"}];function R(){const{auth:r}=j().props,{data:s,setData:a,put:p,errors:i,processing:u,recentlySuccessful:h}=v({ip:r.user.ip,port:r.user.port,media_url:r.user.media_url,media_height:r.user.media_height,media_width:r.user.media_width}),g=t=>{t.preventDefault(),p(route("tv_settings.update"),{preserveScroll:!0,onSuccess:()=>{const o=n.current;if(o&&o.readyState===WebSocket.OPEN){let x={event:"trigger-settings",data:s};o.send(JSON.stringify(x))}else console.warn("WebSocket is not open.")}})},n=c.useRef(null);return c.useEffect(()=>{const t=new WebSocket("ws://192.168.3.245:7777");return n.current=t,t.addEventListener("open",()=>{console.log("Connected to WS server")}),t.addEventListener("error",o=>{console.error("WebSocket error:",o)}),()=>{t.close()}},[]),e.jsxs(w,{breadcrumbs:k,children:[e.jsx(f,{title:"TV settings"}),e.jsx(_,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(N,{title:"Update your tv settings",description:"update ip and port to connect to tv"}),e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"ip",children:"Ip Address"}),e.jsx(d,{id:"ip",className:"mt-1 block w-full",value:s.ip,onChange:t=>a("ip",t.target.value),required:!0,autoComplete:"ip",placeholder:"Ip Address"}),e.jsx(l,{className:"mt-2",message:i.ip})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"port",children:"Port"}),e.jsx(d,{id:"port",className:"mt-1 block w-full",value:s.port,onChange:t=>a("port",t.target.value),required:!0,autoComplete:"port",placeholder:"Port"}),e.jsx(l,{className:"mt-2",message:i.port})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"port",children:"Media Url"}),e.jsx(d,{id:"media_url",className:"mt-1 block w-full",value:s.media_url,onChange:t=>a("media_url",t.target.value),required:!0,autoComplete:"media_url",placeholder:"media_url"}),e.jsx(l,{className:"mt-2",message:i.media_url})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"port",children:"Media Height"}),e.jsx(d,{id:"media_height",className:"mt-1 block w-full",value:s.media_height,onChange:t=>a("media_height",t.target.value),required:!0,autoComplete:"media_height",placeholder:"Media Height"}),e.jsx(l,{className:"mt-2",message:i.media_height})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"port",children:"Media Width"}),e.jsx(d,{id:"media_width",className:"mt-1 block w-full",value:s.media_width,onChange:t=>a("media_width",t.target.value),required:!0,autoComplete:"media_width",placeholder:"Media Width"}),e.jsx(l,{className:"mt-2",message:i.media_width})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(S,{disabled:u,children:"Save & Connect"}),e.jsx(b,{show:h,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-neutral-600",children:"Saved"})})]})]})]})})]})}export{R as default};
