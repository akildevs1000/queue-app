import{K as f,m as N,r as h,j as e,L as S}from"./app-C0323dSE.js";import{S as y,H as b}from"./layout-BR-4RAvr.js";import{I as i}from"./input-error-C_8jAJbO.js";import{B as w}from"./button-qxJnuGv1.js";import{I as n}from"./input-9mHWVFj7.js";import{L as l}from"./label-rqT3xHz3.js";import{A as C}from"./app-layout-DCqIq2Ql.js";import{S as L,a as k,b as E,c as I,f as c}from"./select-CCbDqpjw.js";import{z as M}from"./transition-Ah1FASbo.js";import"./index-BOWObJjw.js";import"./utils-jAU0Cazi.js";import"./index-D8CUWrj_.js";import"./app-logo-icon-Bf2wZ0zl.js";import"./index-Bj03YIKp.js";const F=[{title:"Tv Settings",href:"/settings/tv-settings"}];function J(){const{auth:o}=f().props,{data:t,setData:a,put:g,errors:r,processing:x,recentlySuccessful:j}=N({ip:o.user.ip,port:o.user.port,media_type:o.user.media_type||"image",media_url:o.user.media_url,media_height:o.user.media_height,media_width:o.user.media_width}),v=s=>{s.preventDefault(),g(route("tv_settings.update"),{preserveScroll:!0,onSuccess:()=>{p()}})},m=h.useRef(null),p=()=>{if(!(t!=null&&t.ip)||!(t!=null&&t.port)){console.warn("Missing IP or port");return}const s=`ws://${t.ip}:${t.port}`,d=new WebSocket(s);m.current=d,d.addEventListener("open",()=>{console.log("Connected to WS server");const u={event:"trigger-settings",data:t};d.send(JSON.stringify(u))}),d.addEventListener("error",u=>{console.error("WebSocket error:",u)}),d.addEventListener("close",()=>{console.log("WebSocket connection closed")})},_=()=>{m.current&&(m.current.close(),m.current=null)};return h.useEffect(()=>(p(),()=>{_()}),[]),e.jsxs(C,{breadcrumbs:F,children:[e.jsx(S,{title:"TV settings"}),e.jsx(y,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(b,{title:"Update your tv settings",description:"update ip and port to connect to tv"}),e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"ip",children:"Ip Address"}),e.jsx(n,{id:"ip",className:"mt-1 block w-full",value:t.ip,onChange:s=>a("ip",s.target.value),required:!0,autoComplete:"ip",placeholder:"Ip Address"}),e.jsx(i,{className:"mt-2",message:r.ip})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"port",children:"Port"}),e.jsx(n,{id:"port",className:"mt-1 block w-full",value:t.port,onChange:s=>a("port",s.target.value),required:!0,autoComplete:"port",placeholder:"Port"}),e.jsx(i,{className:"mt-2",message:r.port})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"media_type",children:"Media Type"}),e.jsxs(L,{value:t.media_type,onValueChange:s=>a("media_type",s),children:[e.jsx(k,{className:"w-full",children:e.jsx(E,{placeholder:"Select media type"})}),e.jsxs(I,{children:[e.jsx(c,{value:"youtube",children:"YouTube"}),e.jsx(c,{value:"video",children:"Video"}),e.jsx(c,{value:"gif",children:"GIF"}),e.jsx(c,{value:"image",children:"Image (Multiple URLs)"})]})]}),e.jsx(i,{className:"mt-2",message:r.media_type})]}),t.media_type==="image"?e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"media_url",children:"Media URLs (Enter each URL and press Enter)"}),e.jsx("textarea",{id:"media_url",className:"mt-1 block w-full rounded border px-2 py-1 text-sm",rows:5,placeholder:"Paste each image URL and press Enter",value:t.media_url,onChange:s=>a("media_url",s.target.value.replace(/\r/g,""))}),e.jsx(i,{className:"mt-2",message:r.media_url})]}):e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"media_url",children:"Media URL"}),e.jsx(n,{id:"media_url",className:"mt-1 block w-full",value:t.media_url,onChange:s=>a("media_url",s.target.value),required:!0,autoComplete:"media_url",placeholder:"Media URL"}),e.jsx(i,{className:"mt-2",message:r.media_url})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"port",children:"Media Height"}),e.jsx(n,{id:"media_height",className:"mt-1 block w-full",value:t.media_height,onChange:s=>a("media_height",s.target.value),required:!0,autoComplete:"media_height",placeholder:"Media Height"}),e.jsx(i,{className:"mt-2",message:r.media_height})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"port",children:"Media Width"}),e.jsx(n,{id:"media_width",className:"mt-1 block w-full",value:t.media_width,onChange:s=>a("media_width",s.target.value),required:!0,autoComplete:"media_width",placeholder:"Media Width"}),e.jsx(i,{className:"mt-2",message:r.media_width})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(w,{disabled:x,children:"Save & Connect"}),e.jsx(M,{show:j,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-neutral-600",children:"Saved"})})]})]})]})})]})}export{J as default};
