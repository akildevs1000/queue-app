import{r as m,m as D,j as e,L as W}from"./app-CTmxYTow.js";import{A as X,D as z,a as B,b as $,c as Y,d as L}from"./app-layout-7EDDyHAg.js";import{u as Z,T as ee,a as se,b as k,c as ae,f as A,d as re,e as K,g as ne,h as te,i as le,j as ie}from"./table-BAtS4uoo.js";import{S as F,a as T,b as I,c as E,f as R,C as oe,d as de,e as ce}from"./select-DBbT-n_j.js";import{B as C}from"./button-CnkP_CoE.js";import{I as p}from"./input-D7s4Acid.js";import{D as G,a as ue,b as O,c as me,d as he}from"./dialog-Ea-OXCki.js";import{G as xe}from"./GradientButton-CdTLwTUP.js";import{I as j}from"./input-error-BTMp13Ma.js";import{L as w}from"./label-BEnkY-Wm.js";import{T as pe,a as ge,b as U,c as q}from"./tabs-knNWV7q0.js";import{E as je,P as we,T as ve}from"./trash-CYYHQskZ.js";import"./utils-jAU0Cazi.js";import"./index-C_UzlN1F.js";import"./app-logo-icon-CK59LXhu.js";import"./index-BdyXR5IR.js";import"./index-CE3qNJZc.js";function fe({title:x,endpoint:h}){const[s,g]=m.useState(!1),{data:i,setData:o,post:v,processing:c,reset:d,errors:t}=D({name:"",number:"",email:"",password:"",password_confirmation:"",service_id:0,counter_id:0}),[_,P]=m.useState([]),[l,b]=m.useState([]),r=async()=>{try{const N=await(await fetch("/service-list")).json();P(N)}catch(a){console.error("Failed to fetch services",a)}};m.useEffect(()=>{s&&r()},[s]);const u=a=>{console.log(i),a.preventDefault(),v(h,{onSuccess:()=>{d(),g(!1)}})},S=async a=>{o("service_id",parseInt(a));try{const V=await(await fetch(`/counter-list-by-service-id/${a}`)).json();console.log("ðŸš€ ~ handleServiceChange ~ json:",V),b(V)}catch(N){console.error("Failed to fetch services",N)}},M=async a=>{o("counter_id",parseInt(a))};return e.jsxs(G,{open:s,onOpenChange:g,children:[e.jsx(ue,{asChild:!0,children:e.jsxs(xe,{children:["Create ",x," "]})}),e.jsxs(O,{children:[e.jsxs("h2",{className:"text-xl font-bold",children:["Create ",x]}),e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsxs("div",{className:"max-w-md",children:[e.jsxs(F,{onValueChange:S,value:i.service_id?String(i.service_id):"",children:[e.jsx(T,{className:"w-full",children:e.jsx(I,{})}),e.jsx(E,{children:_.map(a=>e.jsx(R,{value:String(a.id),children:a.name},a.id))})]}),t.service_id&&e.jsx("p",{className:"pt-1 pl-1 text-sm text-red-400",children:t.service_id})]}),e.jsxs("div",{className:"max-w-md",children:[e.jsxs(F,{onValueChange:M,value:i.counter_id?String(i.counter_id):"",children:[e.jsx(T,{className:"w-full",children:e.jsx(I,{})}),e.jsx(E,{children:l.map(a=>e.jsx(R,{value:String(a.id),children:a.name},a.id))})]}),t.counter_id&&e.jsx("p",{className:"pt-1 pl-1 text-sm text-red-400",children:t.counter_id})]}),e.jsxs("div",{className:"max-w-md",children:[e.jsx(w,{htmlFor:"name",children:"Name"}),e.jsx(p,{id:"name",required:!0,tabIndex:3,autoComplete:"name",value:i.name,onChange:a=>o("name",a.target.value),disabled:c,placeholder:"Jhon"}),e.jsx(j,{message:t.name})]}),e.jsxs("div",{className:"max-w-md",children:[e.jsx(w,{htmlFor:"number",children:"Number"}),e.jsx(p,{id:"number",required:!0,tabIndex:3,autoComplete:"number",value:i.number,onChange:a=>o("number",a.target.value),disabled:c,placeholder:"971123456789"}),e.jsx(j,{message:t.number})]}),e.jsxs("div",{className:"max-w-md",children:[e.jsx(w,{htmlFor:"email",children:"Email address"}),e.jsx(p,{id:"email",type:"email",required:!0,tabIndex:3,autoComplete:"email",value:i.email,onChange:a=>o("email",a.target.value),disabled:c,placeholder:"email@example.com"}),e.jsx(j,{message:t.email})]}),e.jsxs("div",{className:"max-w-md",children:[e.jsx(w,{htmlFor:"password",children:"Password"}),e.jsx(p,{id:"password",type:"password",required:!0,tabIndex:4,autoComplete:"new-password",value:i.password,onChange:a=>o("password",a.target.value),disabled:c,placeholder:"Password"}),e.jsx(j,{message:t.password})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(w,{htmlFor:"password_confirmation",children:"Confirm password"}),e.jsx(p,{id:"password_confirmation",type:"password",required:!0,tabIndex:5,autoComplete:"new-password",value:i.password_confirmation,onChange:a=>o("password_confirmation",a.target.value),disabled:c,placeholder:"Confirm password"}),e.jsx(j,{message:t.password_confirmation})]}),e.jsx(C,{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white",type:"submit",disabled:c,children:c?"Submitting...":"Submit"})]})]})]})}function be({title:x,endpoint:h,item:s,open:g,setOpen:i}){const{setData:o,put:v,processing:c,data:d,errors:t}=D({id:(s==null?void 0:s.id)||"",name:(s==null?void 0:s.name)||"",number:(s==null?void 0:s.number)||"",email:(s==null?void 0:s.email)||"",service_id:(s==null?void 0:s.service_id)||0,counter_id:(s==null?void 0:s.counter_id)||0});console.log("ðŸš€ ~ item?.service_id:",s==null?void 0:s.service_id),console.log("ðŸš€ ~ item?.counter_id:",s==null?void 0:s.counter_id);const[_,P]=m.useState([]),[l,b]=m.useState([]),{setData:r,put:u,processing:S,data:M,errors:a}=D({password:"",password_confirmation:""});m.useEffect(()=>{(async()=>{if(!(!g||!s)){o({id:s.id??"",name:s.name??"",number:s.number??"",email:s.email??"",service_id:s.service_id??0,counter_id:s.counter_id??0});try{const y=await(await fetch("/service-list")).json();P(y)}catch(f){console.error("Failed to fetch services",f)}if(s.service_id)try{const y=await(await fetch(`/counter-list-by-service-id/${s.service_id}`)).json();b(y)}catch(f){console.error("Failed to fetch counters",f)}}})()},[g,s]);const N=async n=>{o("service_id",parseInt(n));try{const y=await(await fetch(`/counter-list-by-service-id/${n}`)).json();console.log("ðŸš€ ~ handleServiceChange ~ json:",y),b(y)}catch(f){console.error("Failed to fetch services",f)}},V=async n=>{o("counter_id",parseInt(n))},J=n=>{n.preventDefault(),v(h+"/"+d.id,{onSuccess:()=>i(!1)})},Q=n=>{n.preventDefault(),u("update-password/"+d.id,{onSuccess:()=>i(!1)})};return e.jsx(G,{open:g,onOpenChange:i,children:e.jsxs(O,{className:"max-w-xl",children:[e.jsx(me,{children:e.jsxs(he,{children:["Edit ",x]})}),e.jsxs(pe,{defaultValue:"profile",className:"mt-4 w-full",children:[e.jsxs(ge,{className:"inline-flex w-full justify-center gap-2",children:[e.jsx(U,{value:"profile",children:"Profile"}),e.jsx(U,{value:"password",children:"Password"})]}),e.jsx(q,{value:"profile",children:e.jsxs("form",{onSubmit:J,className:"mt-4 space-y-4",children:[e.jsxs("div",{children:[e.jsxs(F,{onValueChange:N,value:d.service_id?String(d.service_id):"",children:[e.jsx(T,{className:"w-full",children:e.jsx(I,{})}),e.jsx(E,{children:_.map(n=>e.jsx(R,{value:String(n.id),children:n.name},n.id))})]}),t.service_id&&e.jsx("p",{className:"pt-1 pl-1 text-sm text-red-400",children:t.service_id})]}),e.jsxs("div",{children:[e.jsxs(F,{onValueChange:V,value:d.counter_id?String(d.counter_id):"",children:[e.jsx(T,{className:"w-full",children:e.jsx(I,{})}),e.jsx(E,{children:l.map(n=>e.jsx(R,{value:String(n.id),children:n.name},n.id))})]}),t.counter_id&&e.jsx("p",{className:"pt-1 pl-1 text-sm text-red-400",children:t.counter_id})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"name",children:"Name"}),e.jsx(p,{id:"name",value:d.name,onChange:n=>o("name",n.target.value),disabled:c,placeholder:"John"}),e.jsx(j,{message:t.name})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"number",children:"Number"}),e.jsx(p,{id:"number",value:d.number,onChange:n=>o("number",n.target.value),disabled:c,placeholder:"971123456789"}),e.jsx(j,{message:t.number})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"email",children:"Email"}),e.jsx(p,{id:"email",type:"email",value:d.email,onChange:n=>o("email",n.target.value),disabled:c,placeholder:"email@example.com"}),e.jsx(j,{message:t.email})]}),e.jsx(C,{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white",type:"submit",disabled:c,children:c?"Saving...":"Save Profile"})]})}),e.jsx(q,{value:"password",children:e.jsxs("form",{onSubmit:Q,className:"mt-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx(w,{htmlFor:"password",children:"New Password"}),e.jsx(p,{id:"password",type:"password",value:M.password,onChange:n=>r("password",n.target.value),disabled:S,placeholder:"Enter new password"}),e.jsx(j,{message:a.password})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"password_confirmation",children:"Confirm Password"}),e.jsx(p,{id:"password_confirmation",type:"password",value:M.password_confirmation,onChange:n=>r("password_confirmation",n.target.value),disabled:S,placeholder:"Re-enter new password"}),e.jsx(j,{message:a.password_confirmation})]}),e.jsx(C,{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white",type:"submit",disabled:S,children:S?"Updating...":"Update Password"})]})})]})]})})}const Ce=[{title:"User",href:"/users"}],H=[{accessorKey:"id",header:"#"},{accessorKey:"name",header:"Name"},{accessorKey:"email",header:"Email"},{accessorKey:"number",header:"Number"},{accessorKey:"service.name",header:"Service"},{accessorKey:"counter.name",header:"Counter"},{id:"actions",header:"Action",cell:({row:x})=>{const h=x.original,{delete:s,setData:g}=D({id:h.id,name:h.name,description:h.description}),i=d=>{confirm("Are you sure you want to delete this tasks?")&&s(`/users/${d}`,{onSuccess:()=>{}})},[o,v]=m.useState(!1),c=d=>{console.log("ðŸš€ ~ handleEdit ~ contact:",d),v(!0),g(d)};return e.jsxs("div",{children:[" ",e.jsxs(z,{children:[e.jsx(B,{asChild:!0,children:e.jsxs(C,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(je,{})]})}),e.jsxs($,{align:"end",className:"right-0 cursor-pointer",children:[e.jsxs(L,{onClick:()=>c(h),children:[" ",e.jsx(we,{})," Edit"]}),e.jsxs(L,{onClick:()=>i(h.id),className:"cursor-pointer",children:[e.jsx(ve,{})," Delete"]})]})]}),e.jsx(be,{title:"User",endpoint:"users",open:o,setOpen:v,item:h})]})}}];function Ue({items:x}){var b;const{get:h}=D(),s=r=>{h(route("users.index",{per_page:r}))},[g,i]=m.useState([]),[o,v]=m.useState([]),[c,d]=m.useState({}),[t,_]=m.useState({}),P=m.useMemo(()=>x.data,[x]);m.useEffect(()=>{l.setPageSize(x.per_page)},[x]);const l=Z({data:P,columns:H,onSortingChange:i,onColumnFiltersChange:v,getCoreRowModel:ie(),getPaginationRowModel:le(),getSortedRowModel:te(),getFilteredRowModel:ne(),onColumnVisibilityChange:d,onRowSelectionChange:_,state:{sorting:g,columnFilters:o,columnVisibility:c,rowSelection:t}});return e.jsxs(X,{breadcrumbs:Ce,children:[e.jsx(W,{title:"User"}),e.jsxs("div",{className:"flex w-full items-center justify-between rounded-lg p-5",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(p,{placeholder:"Filter titles...",value:((b=l.getColumn("name"))==null?void 0:b.getFilterValue())??"",onChange:r=>{var u;return(u=l.getColumn("name"))==null?void 0:u.setFilterValue(r.target.value)},className:"mr-1 max-w-sm"}),e.jsxs(z,{children:[e.jsx(B,{asChild:!0,children:e.jsxs(C,{variant:"outline",children:["Columns ",e.jsx(oe,{})]})}),e.jsx($,{align:"end",children:l.getAllColumns().filter(r=>r.getCanHide()).map(r=>e.jsx(Y,{className:"capitalize",checked:r.getIsVisible(),onCheckedChange:u=>r.toggleVisibility(!!u),children:r.id},r.id))})]})]}),e.jsx(fe,{title:"User",endpoint:"users"})]}),e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:e.jsxs("div",{className:"gap-4 rounded-xl border border-gray-200 bg-[var(--background)] p-4 text-[var(--foreground)] dark:border-gray-700",children:[e.jsxs(ee,{children:[e.jsx(se,{children:l.getHeaderGroups().map(r=>e.jsx(k,{children:r.headers.map(u=>e.jsx(ae,{children:u.isPlaceholder?null:A(u.column.columnDef.header,u.getContext())},u.id))},r.id))}),e.jsx(re,{children:l.getRowModel().rows.length?l.getRowModel().rows.map(r=>e.jsx(k,{children:r.getVisibleCells().map(u=>e.jsx(K,{children:A(u.column.columnDef.cell,u.getContext())},u.id))},r.id)):e.jsx(k,{children:e.jsx(K,{colSpan:H.length,className:"h-24 text-center",children:"No results."})})})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"Rows per page:"}),e.jsxs(F,{onValueChange:r=>{l.setPageSize(Number(r)),s(Number(r))},value:String(l.getState().pagination.pageSize),children:[e.jsx(T,{className:"w-[120px]",children:e.jsx(I,{placeholder:"Per Page"})}),e.jsx(E,{children:e.jsxs(de,{children:[e.jsx(ce,{children:"Per Page"}),[5,10,20,50,100].map(r=>e.jsx(R,{value:String(r),children:r},r))]})})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{variant:"outline",onClick:()=>l.previousPage(),disabled:!l.getCanPreviousPage(),children:"Previous"}),e.jsxs("span",{children:["Page ",l.getState().pagination.pageIndex+1," of ",l.getPageCount()]}),e.jsx(C,{variant:"outline",onClick:()=>l.nextPage(),disabled:!l.getCanNextPage(),children:"Next"})]})]})]})})]})}export{H as columns,Ue as default};
