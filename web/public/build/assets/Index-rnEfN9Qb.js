import{r as c,m as C,j as e,L as F}from"./app-BWHm7pyg.js";import{e as A,A as H,D as T,a as V,b as E,c as B,d as P}from"./app-layout-Dh7luSD5.js";import{u as K,T as L,a as O,b,c as G,f as R,d as z,e as M,g as $,h as q,i as J,j as Q}from"./table-DefZh8K2.js";import{S,a as w,b as N,c as y,f as D,C as U,d as W,e as X}from"./select-CPmlyO3b.js";import{B as v}from"./button-BRCRbFlS.js";import{I as f}from"./input-BFyzTYtM.js";import{D as I,a as Y,b as k,c as Z}from"./dialog-J-BSbETD.js";import{G as ee}from"./GradientButton-pX1HXUDl.js";import{E as se,P as te,T as ae}from"./trash-CbR46elm.js";import"./utils-jAU0Cazi.js";import"./index-CYHHy9QM.js";import"./app-logo-icon-DuV-PU51.js";import"./index-Cbg3v19s.js";import"./index-BtYAOiJi.js";function ne({title:o,endpoint:i}){const[t,p]=c.useState(!1),[u,m]=c.useState([]),{data:d,setData:l,post:x,processing:g,reset:h,errors:r}=C({name:"",service_id:0,description:""}),a=async()=>{try{const n=await(await fetch("/service-list")).json();m(n)}catch(s){console.error("Failed to fetch services",s)}};c.useEffect(()=>{t&&a()},[t]);const j=s=>{s.preventDefault(),x(i,{onSuccess:()=>{h(),p(!1)}})};return e.jsxs(I,{open:t,onOpenChange:p,children:[e.jsx(Y,{asChild:!0,children:e.jsxs(ee,{children:["Create ",o," "]})}),e.jsxs(k,{children:[e.jsxs("h2",{className:"text-xl font-bold",children:["Create ",o]}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{className:"max-w-md",children:[e.jsxs(S,{onValueChange:s=>l("service_id",parseInt(s)),value:d.service_id?String(d.service_id):"",children:[e.jsx(w,{className:"w-full",children:e.jsx(N,{})}),e.jsx(y,{children:u.map(s=>e.jsx(D,{value:String(s.id),children:s.name},s.id))})]}),r.service_id&&e.jsx("p",{className:"pt-1 pl-1 text-sm text-red-400",children:r.service_id})]}),e.jsxs("div",{className:"max-w-md",children:[e.jsx(f,{placeholder:"Name",type:"text",value:d.name,onChange:s=>l("name",s.target.value)}),r.name&&e.jsx("p",{className:"pt-1 pl-1 text-sm text-red-400",children:r.name})]}),e.jsxs("div",{className:"max-w-md",children:[e.jsx(f,{placeholder:"Description",type:"text",value:d.description,onChange:s=>l("description",s.target.value)}),r.description&&e.jsx("p",{className:"pt-1 pl-1 text-sm text-red-400",children:r.description})]}),e.jsx(v,{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white",type:"submit",disabled:g,children:g?"Submitting...":"Submit"})]})]})]})}function re({title:o,endpoint:i,item:t,open:p,setOpen:u}){const[m,d]=c.useState([]),{setData:l,put:x,processing:g,data:h,errors:r}=C({id:(t==null?void 0:t.id)||"",name:(t==null?void 0:t.name)||"",service_id:(t==null?void 0:t.service_id)||0,description:(t==null?void 0:t.description)||""}),a=async()=>{try{const n=await(await fetch("/service-list")).json();d(n)}catch(s){console.error("Failed to fetch services",s)}},j=s=>{s.preventDefault(),x(i+"/"+h.id,{onSuccess:()=>{u(!1)}})};return c.useEffect(()=>{l({id:(t==null?void 0:t.id)||"",name:(t==null?void 0:t.name)||"",service_id:(t==null?void 0:t.service_id)||0,description:(t==null?void 0:t.description)||""}),a()},[t]),e.jsx(I,{open:p,onOpenChange:u,children:e.jsxs(k,{children:[e.jsx(Z,{children:e.jsxs(A,{children:["Edit ",o," "]})}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{className:"max-w-md",children:[e.jsxs(S,{onValueChange:s=>l("service_id",parseInt(s)),value:h.service_id?String(h.service_id):"",children:[e.jsx(w,{className:"w-full",children:e.jsx(N,{})}),e.jsx(y,{children:m.map(s=>e.jsx(D,{value:String(s.id),children:s.name},s.id))})]}),r.service_id&&e.jsx("p",{className:"text-red-400 pl-1 pt-1 text-sm",children:r.service_id})]}),e.jsxs("div",{className:"max-w-md",children:[e.jsx(f,{placeholder:"Name",type:"text",value:h.name,onChange:s=>l("name",s.target.value)}),r.name&&e.jsx("p",{className:"text-red-400 pl-1 pt-1 text-sm",children:r.name})]}),e.jsxs("div",{className:"max-w-md",children:[e.jsx(f,{placeholder:"Description",type:"text",value:h.description,onChange:s=>l("description",s.target.value)}),r.description&&e.jsx("p",{className:"text-red-400 pl-1 pt-1 text-sm",children:r.description})]}),e.jsx(v,{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white",type:"submit",disabled:g,children:g?"Submitting...":"Submit"})]})]})})}const ie=[{title:"Counter",href:"/counters"}],_=[{accessorKey:"id",header:"#"},{accessorKey:"name",header:"Name"},{accessorKey:"description",header:"Description"},{accessorKey:"service.name",header:"Service"},{id:"actions",header:"Action",cell:({row:o})=>{const i=o.original,{delete:t,setData:p}=C({id:i.id,name:i.name,description:i.description}),u=x=>{confirm("Are you sure you want to delete this tasks?")&&t(`/counters/${x}`,{onSuccess:()=>{}})},[m,d]=c.useState(!1),l=x=>{console.log("ðŸš€ ~ handleEdit ~ contact:",x),d(!0),p(x)};return e.jsxs("div",{children:[" ",e.jsxs(T,{children:[e.jsx(V,{asChild:!0,children:e.jsxs(v,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(se,{})]})}),e.jsxs(E,{align:"end",className:"right-0 cursor-pointer",children:[e.jsxs(P,{onClick:()=>l(i),children:[" ",e.jsx(te,{})," Edit"]}),e.jsxs(P,{onClick:()=>u(i.id),className:"cursor-pointer",children:[e.jsx(ae,{})," Delete"]})]})]}),e.jsx(re,{title:"Counter",endpoint:"counters",open:m,setOpen:d,item:i})]})}}];function be({items:o}){var j;const{get:i}=C(),t=s=>{i(route("counters.index",{per_page:s}))},[p,u]=c.useState([]),[m,d]=c.useState([]),[l,x]=c.useState({}),[g,h]=c.useState({}),r=c.useMemo(()=>o.data,[o]);c.useEffect(()=>{a.setPageSize(o.per_page)},[o]);const a=K({data:r,columns:_,onSortingChange:u,onColumnFiltersChange:d,getCoreRowModel:Q(),getPaginationRowModel:J(),getSortedRowModel:q(),getFilteredRowModel:$(),onColumnVisibilityChange:x,onRowSelectionChange:h,state:{sorting:p,columnFilters:m,columnVisibility:l,rowSelection:g}});return e.jsxs(H,{breadcrumbs:ie,children:[e.jsx(F,{title:"Counter"}),e.jsxs("div",{className:"flex w-full items-center justify-between rounded-lg p-5",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(f,{placeholder:"Filter titles...",value:((j=a.getColumn("name"))==null?void 0:j.getFilterValue())??"",onChange:s=>{var n;return(n=a.getColumn("name"))==null?void 0:n.setFilterValue(s.target.value)},className:"mr-1 max-w-sm"}),e.jsxs(T,{children:[e.jsx(V,{asChild:!0,children:e.jsxs(v,{variant:"outline",children:["Columns ",e.jsx(U,{})]})}),e.jsx(E,{align:"end",children:a.getAllColumns().filter(s=>s.getCanHide()).map(s=>e.jsx(B,{className:"capitalize",checked:s.getIsVisible(),onCheckedChange:n=>s.toggleVisibility(!!n),children:s.id},s.id))})]})]}),e.jsx(ne,{title:"Counter",endpoint:"counters"})]}),e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:e.jsxs("div",{className:"gap-4 rounded-xl border border-gray-200 bg-[var(--background)] p-4 text-[var(--foreground)] dark:border-gray-700",children:[e.jsxs(L,{children:[e.jsx(O,{children:a.getHeaderGroups().map(s=>e.jsx(b,{children:s.headers.map(n=>e.jsx(G,{children:n.isPlaceholder?null:R(n.column.columnDef.header,n.getContext())},n.id))},s.id))}),e.jsx(z,{children:a.getRowModel().rows.length?a.getRowModel().rows.map(s=>e.jsx(b,{children:s.getVisibleCells().map(n=>e.jsx(M,{children:R(n.column.columnDef.cell,n.getContext())},n.id))},s.id)):e.jsx(b,{children:e.jsx(M,{colSpan:_.length,className:"h-24 text-center",children:"No results."})})})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"Rows per page:"}),e.jsxs(S,{onValueChange:s=>{a.setPageSize(Number(s)),t(Number(s))},value:String(a.getState().pagination.pageSize),children:[e.jsx(w,{className:"w-[120px]",children:e.jsx(N,{placeholder:"Per Page"})}),e.jsx(y,{children:e.jsxs(W,{children:[e.jsx(X,{children:"Per Page"}),[5,10,20,50,100].map(s=>e.jsx(D,{value:String(s),children:s},s))]})})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{variant:"outline",onClick:()=>a.previousPage(),disabled:!a.getCanPreviousPage(),children:"Previous"}),e.jsxs("span",{children:["Page ",a.getState().pagination.pageIndex+1," of ",a.getPageCount()]}),e.jsx(v,{variant:"outline",onClick:()=>a.nextPage(),disabled:!a.getCanNextPage(),children:"Next"})]})]})]})})]})}export{_ as columns,be as default};
