import{U as E,m as C,j as e,r as m,K as z,L as U}from"./app-Dt_0lK2L.js";import{e as $,A as J,D as I,a as T,b as R,c as W,d as M}from"./app-layout-7ZLmkLoT.js";import{S as _,a as w,b as S,c as P,g as D,u as X,C as Y,f as V,d as Z,e as ee,E as te,P as se,T as re,h as ae,i as le,j as ie,k as ne}from"./select-jd9K3kCk.js";import{B as y}from"./button-hS_V_gx-.js";import{I as o}from"./input--SAtNFl3.js";import{T as ce,a as de,b as N,c as oe,d as pe,e as k}from"./table-B9eMVvFR.js";import{D as K,a as xe,b as L,c as ue}from"./dialog-BH2fJvLy.js";import{G as me}from"./GradientButton-CHU7_Dnl.js";import{t as he}from"./index-Bl-Hf1td.js";import{L as d}from"./label-C-iuktFz.js";import"./utils-jAU0Cazi.js";import"./index-B5QTDXBA.js";import"./app-logo-icon-DitkmmnH.js";import"./index-CL1UTqbg.js";import"./index-BPNGzwQw.js";const ge=({categories:t})=>{const[b,h]=E.useState(!1),{data:u,setData:p,post:x,processing:g,reset:j,errors:a}=C({item_number:"",title:"",price:0,qty:0,description:"",product_category_id:0,image:null}),n=i=>{i.preventDefault(),x("/products",{onSuccess:()=>{j(),h(!1),he.success("Product created successfully")}})};return e.jsxs(K,{open:b,onOpenChange:h,children:[e.jsx(xe,{asChild:!0,children:e.jsx(me,{children:"Create Product"})}),e.jsxs(L,{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Create Product"}),e.jsxs("form",{onSubmit:n,className:"space-y-4",children:[e.jsxs("div",{className:"max-w-md",children:[e.jsx(d,{htmlFor:"item_number",children:"Item Code"}),e.jsx(o,{id:"item_number",type:"text",value:u.item_number,onChange:i=>p("item_number",i.target.value)}),a.item_number&&e.jsx("p",{className:"text-red-400 text-sm pt-1",children:a.item_number})]}),e.jsxs("div",{className:"max-w-md",children:[e.jsx(d,{htmlFor:"title",children:"Title"}),e.jsx(o,{id:"title",type:"text",value:u.title,onChange:i=>p("title",i.target.value)}),a.title&&e.jsx("p",{className:"text-red-400 pl-1 pt-1 text-sm",children:a.title})]}),e.jsxs("div",{className:"max-w-md",children:[e.jsx(d,{htmlFor:"price",children:"Price"}),e.jsx(o,{id:"price",type:"number",value:u.price,onChange:i=>p("price",parseFloat(i.target.value))}),a.price&&e.jsx("p",{className:"text-red-400 pl-1 pt-1 text-sm",children:a.price})]}),e.jsxs("div",{className:"max-w-md",children:[e.jsx(d,{htmlFor:"quantity",children:"Quantity"}),e.jsx(o,{id:"quantity",type:"number",value:u.qty,onChange:i=>p("qty",parseFloat(i.target.value))}),a.qty&&e.jsx("p",{className:"text-red-400 pl-1 pt-1 text-sm",children:a.qty})]}),e.jsxs("div",{className:"max-w-md",children:[e.jsx(d,{htmlFor:"description",children:"Description"}),e.jsx(o,{id:"description",type:"text",value:u.description,onChange:i=>p("description",i.target.value)}),a.description&&e.jsx("p",{className:"text-red-400 pl-1 pt-1 text-sm",children:a.description})]}),e.jsxs("div",{className:"max-w-md",children:[e.jsx(d,{htmlFor:"category",children:"Category"}),e.jsxs(_,{onValueChange:i=>p("product_category_id",parseInt(i)),value:u.product_category_id?String(u.product_category_id):"",children:[e.jsx(w,{className:"w-full",children:e.jsx(S,{})}),e.jsx(P,{children:t.map(i=>e.jsx(D,{value:String(i.id),children:i.name},i.id))})]}),a.product_category_id&&e.jsx("p",{className:"text-red-400 pl-1 pt-1 text-sm",children:a.product_category_id})]}),e.jsxs("div",{className:"max-w-md",children:[e.jsx(d,{htmlFor:"description",children:"Image"}),e.jsx(o,{placeholder:"Image",type:"file",id:"image",onChange:i=>{var l;return p("image",((l=i.target.files)==null?void 0:l[0])||null)}}),a.image&&e.jsx("p",{className:"text-red-400 pl-1 pt-1 text-sm",children:a.image})]}),e.jsx(y,{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white",type:"submit",disabled:g,children:g?"Submitting...":"Submit"})]})]})]})};function je({item:t,categories:b}){const[h]=m.useState((t==null?void 0:t.image)||""),[u,p]=m.useState(!1),{setData:x,put:g,processing:j,data:a,errors:n}=C({id:(t==null?void 0:t.id)||"",item_number:(t==null?void 0:t.item_number)||"",title:(t==null?void 0:t.title)||"",price:(t==null?void 0:t.price)||"",qty:(t==null?void 0:t.qty)||"",description:(t==null?void 0:t.description)||"",product_category_id:(t==null?void 0:t.product_category_id)||"",image:null}),i=l=>{l.preventDefault(),g("/products/"+a.id,{onSuccess:()=>{p(!1)}})};return E.useEffect(()=>{x({id:(t==null?void 0:t.id)||"",item_number:(t==null?void 0:t.item_number)||"",title:(t==null?void 0:t.title)||"",price:(t==null?void 0:t.price)||"",qty:(t==null?void 0:t.qty)||"",description:(t==null?void 0:t.description)||"",product_category_id:(t==null?void 0:t.product_category_id)||"",image:(t==null?void 0:t.image)||""})},[t]),e.jsx(K,{open:u,onOpenChange:p,children:e.jsxs(L,{children:[e.jsx(ue,{children:e.jsx($,{children:"Edit Product"})}),e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsxs("div",{className:"max-w-md",children:[e.jsx(d,{htmlFor:"item_number",children:"Item Code"}),e.jsx(o,{id:"item_number",type:"text",value:a.item_number,onChange:l=>x("item_number",l.target.value)}),n.item_number&&e.jsx("p",{className:"text-red-400 text-sm pt-1",children:n.item_number})]}),e.jsxs("div",{className:"max-w-md",children:[e.jsx(d,{htmlFor:"title",children:"Title"}),e.jsx(o,{id:"title",type:"text",value:a.title,onChange:l=>x("title",l.target.value)}),n.title&&e.jsx("p",{className:"text-red-400 pl-1 pt-1 text-sm",children:n.title})]}),e.jsxs("div",{className:"max-w-md",children:[e.jsx(d,{htmlFor:"price",children:"Price"}),e.jsx(o,{id:"price",type:"number",value:a.price,onChange:l=>x("price",parseFloat(l.target.value))}),n.price&&e.jsx("p",{className:"text-red-400 pl-1 pt-1 text-sm",children:n.price})]}),e.jsxs("div",{className:"max-w-md",children:[e.jsx(d,{htmlFor:"quantity",children:"Quantity"}),e.jsx(o,{id:"quantity",type:"number",value:a.qty,onChange:l=>x("qty",parseFloat(l.target.value))}),n.qty&&e.jsx("p",{className:"text-red-400 pl-1 pt-1 text-sm",children:n.qty})]}),e.jsxs("div",{className:"max-w-md",children:[e.jsx(d,{htmlFor:"description",children:"Description"}),e.jsx(o,{id:"description",type:"text",value:a.description,onChange:l=>x("description",l.target.value)}),n.description&&e.jsx("p",{className:"text-red-400 pl-1 pt-1 text-sm",children:n.description})]}),e.jsxs("div",{className:"max-w-md",children:[e.jsx(d,{htmlFor:"category",children:"Category"}),e.jsxs(_,{onValueChange:l=>x("product_category_id",parseInt(l)),value:a.product_category_id?String(a.product_category_id):"",children:[e.jsx(w,{className:"w-full",children:e.jsx(S,{})}),e.jsx(P,{children:b.map(l=>e.jsx(D,{value:String(l.id),children:l.name},l.id))})]}),n.product_category_id&&e.jsx("p",{className:"text-red-400 pl-1 pt-1 text-sm",children:n.product_category_id})]}),e.jsxs("div",{className:"max-w-md",children:[e.jsx("img",{src:h,alt:"Product",className:"h-100 py-5 rounded-md object-cover cursor-pointer hover:scale-105 transition-transform"}),e.jsx(o,{placeholder:"Image",type:"file",id:"image",onChange:l=>{var v;return x("image",((v=l.target.files)==null?void 0:v[0])||null)}}),n.image&&e.jsx("p",{className:"text-red-400 pl-1 pt-1 text-sm",children:n.image})]}),e.jsx(y,{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white",type:"submit",disabled:j,children:j?"Submitting...":"Submit"})]})]})})}const ye=[{title:"Product",href:"/products"}];function Ve({items:t}){var q;const{props:b}=z(),h=b.categories,{get:u}=C(),p=r=>{u(route("product-categories.index",{per_page:r}))},[x,g]=m.useState([]),[j,a]=m.useState([]),[n,i]=m.useState({}),[l,v]=m.useState({}),O=m.useMemo(()=>t.data,[t]);m.useEffect(()=>{c.setPageSize(t.per_page)},[t]);const F=[{accessorKey:"id",header:"#"},{accessorKey:"user_id",header:"User Id"},{accessorKey:"item_number",header:"Item Number"},{accessorKey:"image",header:"Image",cell:({row:r})=>{const s=r.getValue("image");return s&&s.trim()!==""?e.jsx("img",{src:s,alt:"Product",className:"w-14 h-14 rounded-md object-cover cursor-pointer hover:scale-105 transition-transform"}):e.jsx("span",{className:"text-sm text-gray-500 italic",children:"Image not available"})}},{accessorKey:"title",header:"Title"},{accessorKey:"price",header:"Price"},{accessorKey:"qty",header:"Qty"},{accessorKey:"description",header:"Description"},{accessorKey:"product_category.name",header:"Category"},{id:"actions",header:"Action",cell:({row:r})=>{const s=r.original,{delete:A,setData:H}=C({id:s.id,item_number:s.item_number,title:s.title,price:s.price,qty:s.qty,description:s.description,product_category_id:s.product_category_id}),B=f=>{confirm("Are you sure you want to delete this tasks?")&&A(`/products/${f}`)},[be,G]=m.useState(!1),Q=f=>{G(!0),H(f)};return e.jsxs("div",{children:[e.jsxs(I,{children:[e.jsx(T,{asChild:!0,children:e.jsxs(y,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(te,{})]})}),e.jsxs(R,{align:"end",className:"right-0 cursor-pointer",children:[e.jsxs(M,{onClick:()=>Q(s),children:[e.jsx(se,{})," Edit"]}),e.jsxs(M,{onClick:()=>B(s.id),children:[e.jsx(re,{})," Delete"]})]})]}),e.jsx(je,{item:s,categories:h})]})}}],c=X({data:O,columns:F,onSortingChange:g,onColumnFiltersChange:a,getCoreRowModel:ne(),getPaginationRowModel:ie(),getSortedRowModel:le(),getFilteredRowModel:ae(),onColumnVisibilityChange:i,onRowSelectionChange:v,state:{sorting:x,columnFilters:j,columnVisibility:n,rowSelection:l}});return e.jsxs(J,{breadcrumbs:ye,children:[e.jsx(U,{title:"Tasks"}),e.jsxs("div",{className:"w-full p-6 rounded-lg shadow flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center py-4",children:[e.jsx(o,{placeholder:"Filter titles...",value:((q=c.getColumn("title"))==null?void 0:q.getFilterValue())??"",onChange:r=>{var s;return(s=c.getColumn("title"))==null?void 0:s.setFilterValue(r.target.value)},className:"max-w-sm  mr-1"}),e.jsxs(I,{children:[e.jsx(T,{asChild:!0,children:e.jsxs(y,{variant:"outline",children:["Columns ",e.jsx(Y,{})]})}),e.jsx(R,{align:"end",children:c.getAllColumns().filter(r=>r.getCanHide()).map(r=>e.jsx(W,{className:"capitalize",checked:r.getIsVisible(),onCheckedChange:s=>r.toggleVisibility(!!s),children:r.id},r.id))})]})]}),e.jsx(ge,{categories:h})]}),e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:e.jsxs("div",{children:[e.jsxs(ce,{children:[e.jsx(de,{children:c.getHeaderGroups().map(r=>e.jsx(N,{children:r.headers.map(s=>e.jsx(oe,{children:s.isPlaceholder?null:V(s.column.columnDef.header,s.getContext())},s.id))},r.id))}),e.jsx(pe,{children:c.getRowModel().rows.length?c.getRowModel().rows.map(r=>e.jsx(N,{children:r.getVisibleCells().map(s=>e.jsx(k,{children:V(s.column.columnDef.cell,s.getContext())},s.id))},r.id)):e.jsx(N,{children:e.jsx(k,{colSpan:F.length,className:"h-24 text-center",children:"No results."})})})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"Rows per page:"}),e.jsxs(_,{onValueChange:r=>{c.setPageSize(Number(r)),p(Number(r))},value:String(c.getState().pagination.pageSize),children:[e.jsx(w,{className:"w-[120px]",children:e.jsx(S,{placeholder:"Per Page"})}),e.jsx(P,{children:e.jsxs(Z,{children:[e.jsx(ee,{children:"Per Page"}),[5,10,20,50,100].map(r=>e.jsx(D,{value:String(r),children:r},r))]})})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{variant:"outline",onClick:()=>c.previousPage(),disabled:!c.getCanPreviousPage(),children:"Previous"}),e.jsxs("span",{children:["Page ",c.getState().pagination.pageIndex+1," of ",c.getPageCount()]}),e.jsx(y,{variant:"outline",onClick:()=>c.nextPage(),disabled:!c.getCanNextPage(),children:"Next"})]})]})]})})]})}export{Ve as default};
